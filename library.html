<!-- library.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Library</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>Library Books</h1>
    <div id="booksList"></div>

    <script src="firebase.js"></script>
    <script>
        const user = auth.currentUser;

        if (user) {
            const userId = user.uid;

            // Fetch books from Firebase
            const booksRef = database.ref('books');
            booksRef.on('value', (snapshot) => {
                const books = snapshot.val();
                const booksListDiv = document.getElementById('booksList');
                booksListDiv.innerHTML = '';

                // Loop through each book and display
                for (const bookId in books) {
                    const book = books[bookId];
                    const bookDiv = document.createElement('div');
                    bookDiv.innerHTML = `
                        <h3>${book.title}</h3>
                        <p>Author: ${book.author}</p>
                        <p>Genre: ${book.genre}</p>
                        <p>Status: ${book.availability}</p>
                        <button onclick="borrowBook('${bookId}')">Borrow</button>
                    `;
                    booksListDiv.appendChild(bookDiv);
                }
            });
        }

        // Function to borrow a book
        function borrowBook(bookId) {
            const bookRef = database.ref('books/' + bookId);
            bookRef.update({
                availability: 'borrowed',
                borrowerId: user.uid
            });
            alert('Book borrowed!');
        }
    </script>
</body>
</html>
